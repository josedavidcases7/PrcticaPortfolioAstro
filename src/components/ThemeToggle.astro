<button id="themeToggle" class="p-2 cursor-pointer">
  <span id="icon-light" class="hidden">☀️</span>
  <span id="icon-dark">🌙</span>
</button>

<script is:inline>
  const theme = (() => {
    const localStorageTheme = localStorage?.getItem("theme");
    if (localStorageTheme === "dark" || (!localStorageTheme && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
      return "dark";
    }
    return "light";
  })();

  const button = document.getElementById("themeToggle");
  const html = document.documentElement;
  const iconLight = document.getElementById("icon-light");
  const iconDark = document.getElementById("icon-dark");


  if (theme === "light") {
    html.classList.remove("dark");
    iconLight.classList.remove("hidden");
    iconDark.classList.add("hidden");
  } else {
    html.classList.add("dark");
    iconLight.classList.add("hidden");
    iconDark.classList.remove("hidden");
  }
  localStorage.setItem("theme", theme);

  button.addEventListener("click", () => {
    html.classList.toggle("dark");
    if (html.classList.contains("dark")) {
      localStorage.setItem("theme", "dark");
      iconLight.classList.add("hidden");
      iconDark.classList.remove("hidden");
    } else {
      localStorage.setItem("theme", "light");
      iconLight.classList.remove("hidden");
      iconDark.classList.add("hidden");
    }
  });
</script>
